<%= turbo_stream_from dom_id(comment) %>
<%= tag.div id: dom_id(comment) do %>
  <div class="card comment <%= 'pinned-comment' if comment.pin %>" data-pin-comment-target="comment">
    <div class="card-body d-flex flex-column w-100">
      <h6 class="card-subtitle mb-2 text-muted">
        <span id="<%= dom_id(comment) %>_user_username"><%= t('by_username', username: comment.user.username) %></span>
        <span id="<%= dom_id(comment) %>_created_at"><%= t('at_date', date: comment.created_at) %></span>
      </h6>
      <p id="<%= dom_id(comment) %>_content" class="card-text"><%= comment.content %></p>
      <% if comment.user == current_user %>
        <div class="d-flex justify-content-start align-items-center mt-3 mb-3">
          <%= link_to t('edit'), edit_story_comment_path(comment.story_id, comment.id), data: { controller: 'turbo', action: 'click->turbo#getTurboStream' }, class: "me-2" %>|
          <%= button_to t('delete'), story_comment_path(comment.story_id, comment.id),
            method: :delete,
            class: "btn btn-link",
            data: { confirm: t('are_you_sure_delete') }
          %>
        </div>
      <% end %>
      <div class="d-flex justify-content-start align-items-center">
        <%= button_to upvote_label(comment, current_user), vote_story_comment_path(story_id: comment.story, id: comment, type: :upvote), method: :patch, class: "btn btn-link p-0 me-2" %>|
        <%= button_to downvote_label(comment, current_user), vote_story_comment_path(story_id: comment.story, id: comment, type: :downvote), method: :patch, class: "btn btn-link p-0 ms-2" %>
      </div>
    </div>
  </div>
<% end %>
