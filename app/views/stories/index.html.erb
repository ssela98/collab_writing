<%= turbo_frame_tag [@username, 'stories'].compact.join("_") do %>
  <div class="d-flex flex-column justify-content-center align-items-center mx-auto">
    <%= form_tag(stories_path, method: :get, class: "mt-3") do %>
      <%= select_tag(:filter_by_date, options_for_select(%i[today this_week this_month this_year all_time].map { |filter| [filter.to_s.humanize, filter] }, [session[:stories_filter_by]&.humanize, session[:stories_filter_by]]), onchange: "this.form.submit();") %>
      <%= select_tag(:order_by, options_for_select(%i[new top].map { |filter| [filter.to_s.humanize, filter] }, [session[:stories_order_by]&.humanize, session[:stories_order_by]]), onchange: "this.form.submit();") %>
    <% end %>

    <% @stories.each do |story| %>
      <div class="container m-3">
        <%= link_to story_path(story), class: "text-decoration-none text-reset" do %>
          <%= render partial: 'stories/story', locals: { story: story } %>
        <% end %>
        <%= render partial: "shared/votes", locals: { votable: story, vote_path: "vote_story_path", vote_params: { id: story.id }} %>
      </div>
    <% end %>

    <div id="pager" class="d-flex justify-between mb-5">
      <div>
        <%= link_to "< Previous page", request.params.merge(page: @pagy.prev) if @pagy.prev %>
      </div>
      <div class="text-right">
        <%= link_to "Next page >", request.params.merge(page: @pagy.next) if @pagy.next %>
      </div>
    </div>
  </div>
<% end %>
