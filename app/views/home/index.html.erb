<div id="stories" class="d-flex flex-column justify-content-center align-items-center mx-auto">
  <%= form_tag(root_path, method: :get) do %>
    <%= select_tag(:filter_by_time, options_for_select(%i[today this_week this_month this_year all_time].map { |filter| [filter.to_s.humanize, filter] }, [params[:filter_by_time]&.humanize, params[:filter_by_time]]), onchange: "this.form.submit();", include_blank: 'Filter By') %>
    <%= select_tag(:order_by, options_for_select(%i[new top].map { |filter| [filter.to_s.humanize, filter] }, [params[:order_by]&.humanize, params[:order_by]]), onchange: "this.form.submit();", include_blank: 'Sort By') %>
  <% end %>

  <% @stories.each do |story| %>
    <div class="container m-3">
      <%= link_to story_path(story), class: "text-decoration-none text-reset" do %>
        <%= render partial: 'frontpage_story', locals: { story: story } %>
      <% end %>
      <%= render partial: "shared/votes", locals: { votable: story, vote_path: "vote_story_path", vote_params: { id: story.id }} %>
    </div>
  <% end %>
  <div id="pager" class="d-flex justify-between mb-5">
    <div>
      <% if @pagy.prev %>
        <%= link_to "< Previous page", root_path(page: @pagy.prev), class: "my-3 mx-5" %>
      <% end %>
    </div>
    <div class="text-right">
      <% if @pagy.next %>
        <%= link_to "Next page >", root_path(page: @pagy.next), class: "my-3 mx-5" %>
      <% end %>
    </div>
  </div>
</div>
